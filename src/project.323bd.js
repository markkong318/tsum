window.__require=function e(t,n,i){function o(a,s){if(!n[a]){if(!t[a]){var h=a.split("/");if(h=h[h.length-1],!t[h]){var E="function"==typeof __require&&__require;if(!s&&E)return E(h,!0);if(c)return c(h,!0);throw new Error("Cannot find module '"+a+"'")}a=h}var r=n[a]={exports:{}};t[a][0].call(r.exports,function(e){return o(t[a][1][e]||e)},r,r.exports,e,t,n,i)}return n[a].exports}for(var c="function"==typeof __require&&__require,a=0;a<i.length;a++)o(i[a]);return o}({"ball-attr":[function(e,t,n){"use strict";cc._RF.push(t,"c9b93jBUDZGma+eF2K86bf4","ball-attr"),cc.Class({extends:cc.Component,properties:{type:""},onLoad:function(){this.isDead=!1},playDead:function(){this.node.opacity=0}}),cc._RF.pop()},{}],"ball-touch":[function(e,t,n){"use strict";cc._RF.push(t,"61bb2CAov9J75UwU04psHid","ball-touch"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){var e=this;this.node.on(cc.Node.EventType.TOUCH_START,function(){GameEvent.emit(GameEventType.BALL_TOUCH_START,e.node)}),this.node.on(cc.Node.EventType.TOUCH_MOVE,function(e){for(var t=e.getTouches()[0].getLocation(),n=cc.find("Canvas").convertToNodeSpaceAR(t),i=cc.find("Canvas/Ball").children,o=0;o<i.length;o++){var c=i[o],a=c.getComponent(cc.PhysicsCircleCollider),s=c.getPosition(),h=a.radius*c.scale;n.sub(s).mag()<h&&GameEvent.emit(GameEventType.BALL_TOUCH_MOVE,c)}}),this.node.on(cc.Node.EventType.TOUCH_CANCEL,function(){GameEvent.emit(GameEventType.BALL_TOUCH_END,e.node)}),this.node.on(cc.Node.EventType.TOUCH_END,function(){GameEvent.emit(GameEventType.BALL_TOUCH_END,e.node)})}}),cc._RF.pop()},{}],"fan-btn":[function(e,t,n){"use strict";cc._RF.push(t,"6dba97jnyVHJK4bIzcXM9fE","fan-btn"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.isClicked=!1,this.node.on("click",this.handleClick,this)},handleClick:function(){var e=this;if(!0!==this.isClicked){this.isClicked=!0;for(var t=cc.find("Canvas/Ball").children,n=0;n<t.length;n++){var i=t[n].getComponent(cc.RigidBody),o=2*Math.random()-1,c=Math.random(),a=cc.v2(o,c).normalize().mul(2e5);i.applyForceToCenter(a),i.applyTorque(1e5)}this.scheduleOnce(function(){e.isClicked=!1},.5)}}}),cc._RF.pop()},{}],"focus-ball-show":[function(e,t,n){"use strict";cc._RF.push(t,"935fctfpwZN7avuc7WPn8bo","focus-ball-show");cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.initX=this.node.x,this.initY=this.node.y,this.sprite=this.node.getComponent(cc.Sprite),this.targetNode=null,GameEvent.on(GameEventType.BALL_SELECT,this.handleSelect,this),GameEvent.on(GameEventType.BALL_DESELECT,this.handleDeselect,this)},update:function(){this.targetNode&&(this.node.x=this.targetNode.x,this.node.y=this.targetNode.y,this.node.rotation=this.targetNode.rotation)},handleSelect:function(e){var t=e.getComponent(cc.Sprite);this.sprite.spriteFrame=t.spriteFrame,this.targetNode=e,this.node.scale=e.scale+.25},handleDeselect:function(){this.targetNode=null,this.node.x=this.initX,this.node.y=this.initY}}),cc._RF.pop()},{}],"focus-counter-show":[function(e,t,n){"use strict";cc._RF.push(t,"7ca769hQqZO9a0F1eZ/gzd0","focus-counter-show"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.initX=this.node.x,this.initY=this.node.y,this.label=this.node.getComponent(cc.Label),this.targetNode=null,GameEvent.on(GameEventType.BALL_SELECT,this.handleSelect,this),GameEvent.on(GameEventType.BALL_DESELECT,this.handleDeselect,this)},update:function(){this.targetNode&&(this.node.x=this.targetNode.x,this.node.y=this.targetNode.y+80)},handleSelect:function(e,t){this.targetNode=e,this.label.string=t},handleDeselect:function(){this.targetNode=null,this.node.x=this.initX,this.node.y=this.initY}}),cc._RF.pop()},{}],"game-ball-create":[function(e,t,n){"use strict";cc._RF.push(t,"b615550nHtIBrznkrWdzq0r","game-ball-create"),cc.Class({extends:cc.Component,properties:{balls:[cc.Node]},onLoad:function(){GameEvent.on(GameEventType.BALL_CREATE,this.handleBallCreate,this),GameEvent.on(GameEventType.BALL_CLEAN_ALL,this.handleCleanAll,this)},lottery:function(){var e=cc.find("Canvas"),t=cc.find("Canvas/Ball"),n=this.balls[Math.floor(Math.random()*this.balls.length)],i=Math.random()*e.width-e.width/2,o=cc.instantiate(n);o.x=i,o.active=!0,o.parent=t},handleBallCreate:function(e){for(var t=0;t<e;t++)this.lottery()},handleCleanAll:function(){for(var e=cc.find("Canvas/Ball").children,t=0;t<e.length;t++)e[t].destroy()}}),cc._RF.pop()},{}],"game-ball-match":[function(e,t,n){"use strict";cc._RF.push(t,"59283Pc1spMKKa1QU4W06uJ","game-ball-match");cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.waiting=[],this.ballType="",this.isTouched=!1,GameEvent.on(GameEventType.BALL_TOUCH_START,this.handleTouchStart,this),GameEvent.on(GameEventType.BALL_TOUCH_END,this.handleTouchEnd,this),GameEvent.on(GameEventType.BALL_TOUCH_MOVE,this.handleMoveEnter,this)},handleTouchStart:function(e){if(!this.waiting.length){var t=e.getComponent("ball-attr");this.ballType=t.type,this.isTouched=!0,this.waiting.push(e),GameEvent.emit(GameEventType.BALL_SELECT,e,this.waiting.length)}},handleTouchEnd:function(e){var t=this;if(this.isTouched){GameEvent.emit(GameEventType.BALL_DESELECT);for(var n=[],i=0;i<this.waiting.length;i++)n[i]=this.waiting[i];if(this.waiting=[],this.isTouched=!1,n.length>2){GameEvent.emit(GameEventType.GAME_SUM,{balls:n});for(var o=function(e){var i=n[e].getComponent("ball-attr");t.scheduleOnce(function(){i.playDead()},.2*e+.2)},c=0;c<n.length;c++)o(c);this.scheduleOnce(function(){for(var e=0;e<n.length;e++)n[e].destroy();GameEvent.emit(GameEventType.BALL_CREATE,n.length)},.2*(n.length-1)+.2+.2)}}},handleMoveEnter:function(e){if(this.isTouched){if(this.waiting.length>1&&this.waiting[this.waiting.length-2]===e)return this.waiting.splice(-1,1),void GameEvent.emit(GameEventType.BALL_SELECT,e,this.waiting.length);if(!(this.waiting.indexOf(e)>-1)){var t=e.getComponent("ball-attr");if(!t.isDead&&t.type===this.ballType){var n=this.waiting[this.waiting.length-1],i=e,o=n.getComponent(cc.PhysicsCircleCollider),c=i.getComponent(cc.PhysicsCircleCollider),a=n.getPosition(),s=i.getPosition(),h=a.sub(s).mag()-o.radius*n.scale-c.radius*i.scale;console.log("d: "+h),h>40||(console.log("add node"),this.waiting.push(e),GameEvent.emit(GameEventType.BALL_SELECT,e,this.waiting.length))}}}}}),cc._RF.pop()},{}],"game-event":[function(e,t,n){"use strict";cc._RF.push(t,"699b4/ytVNOFb56bvm+35RT","game-event"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){window.GameEvent=new cc.EventTarget,window.GameEventType={BALL_TOUCH_START:"BALL_TOUCH_START",BALL_TOUCH_END:"BALL_TOUCH_END",BALL_TOUCH_MOVE:"BALL_TOUCH_MOVE",BALL_SELECT:"BALL_SELECT",BALL_DESELECT:"BALL_DESELECT",BALL_CREATE:"BALL_CREATE",BALL_DESTROY:"BALL_DESTROY",BALL_CLEAN_ALL:"BALL_CLEAN_ALL",GAME_READY:"GAME_READY",GAME_START:"GAME_START",GAME_OVER:"GAME_OVER",GAME_PAUSE:"GAME_PAUSE",GAME_RESUME:"GAME_RESUME",GAME_TIME_UP:"GAME_TIME_UP",GAME_SUM:"GAME_SUM",TIMER_RESET:"TIMER_RESET",TIMER_UPDATE:"TIMER_UPDATE",SCORE_RESET:"SCORE_RESET",SCORE_UPDATE:"SCORE_UPDATE"},window.NodeEventType={}},start:function(){GameEvent.emit(GameEventType.GAME_READY)}}),cc._RF.pop()},{}],"game-lifecycle":[function(e,t,n){"use strict";cc._RF.push(t,"a0518Sa4gRPtZDSD4raQGNR","game-lifecycle");cc.Class({extends:cc.Component,properties:{},onLoad:function(){GameEvent.on(GameEventType.GAME_READY,this.handleReady,this),GameEvent.on(GameEventType.GAME_START,this.handleStart,this),GameEvent.on(GameEventType.GAME_OVER,this.handleOver,this),GameEvent.on(GameEventType.GAME_PAUSE,this.handlePause,this),GameEvent.on(GameEventType.GAME_RESUME,this.handleResume,this)},handleReady:function(){cc.find("Canvas/Over").active=!1,GameEvent.emit(GameEventType.BALL_CLEAN_ALL),GameEvent.emit(GameEventType.SCORE_RESET),GameEvent.emit(GameEventType.TIMER_RESET),GameEvent.emit(GameEventType.GAME_START)},handleStart:function(){GameEvent.emit(GameEventType.BALL_CREATE,40)},handleOver:function(){cc.find("Canvas/Over").active=!0},handlePause:function(){cc.find("Game").active=!1,cc.director.getPhysicsManager().enabled=!1,cc.find("Canvas/Pause").active=!0},handleResume:function(){cc.find("Game").active=!0,cc.director.getPhysicsManager().enabled=!0,cc.find("Canvas/Pause").active=!1}}),cc._RF.pop()},{}],"game-physic":[function(e,t,n){"use strict";cc._RF.push(t,"e8ce9782ZNKJKt6ywOPu4bL","game-physic"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){cc.director.getPhysicsManager().enabled=!0,cc.director.getPhysicsManager().gravity=cc.v2(0,-1e3)}}),cc._RF.pop()},{}],"game-score":[function(e,t,n){"use strict";cc._RF.push(t,"15f780hxlBFoodT64DEoPwG","game-score");cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.score=0,GameEvent.on(GameEventType.SCORE_RESET,this.handleScoreReset,this),GameEvent.on(GameEventType.GAME_SUM,this.handleGameSum,this)},handleScoreReset:function(){this.score=0,GameEvent.emit(GameEventType.SCORE_UPDATE,this.score)},handleGameSum:function(e){var t=e.balls;this.score+=10*t.length,GameEvent.emit(GameEventType.SCORE_UPDATE,this.score)}}),cc._RF.pop()},{}],"game-timer":[function(e,t,n){"use strict";cc._RF.push(t,"da1c13/xlRPS7G1tGmA5Tg0","game-timer");cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.second=60,GameEvent.on(GameEventType.TIMER_RESET,this.handleTimerReset,this),GameEvent.on(GameEventType.GAME_START,this.handleGameStart,this)},handleTimerReset:function(){this.second=60,GameEvent.emit(GameEventType.TIMER_UPDATE,this.second)},handleGameStart:function(){this.schedule(this.handleCountDown,1,this)},handleCountDown:function(){this.second-=1,GameEvent.emit(GameEventType.TIMER_UPDATE,this.second),0===this.second&&(this.unschedule(this.handleCountDown,this),this.scheduleOnce(function(){GameEvent.emit(GameEventType.GAME_OVER)},2))}}),cc._RF.pop()},{}],"game-ui-show":[function(e,t,n){"use strict";cc._RF.push(t,"049a5CcmEdDTYKkqMvr3yZ3","game-ui-show");cc.Class({extends:cc.Component,properties:{},onLoad:function(){var e=cc.find("Canvas/Top"),t=cc.find("Canvas/Bottom");e.y=100+e.height/2,t.y=-100-t.height/2}}),cc._RF.pop()},{}],"over-show":[function(e,t,n){"use strict";cc._RF.push(t,"0fe25mS9uFAT4Fx+zJJzmrW","over-show"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.maskNode=this.node.getChildByName("Mask"),this.node.on(cc.Node.EventType.TOUCH_START,function(){}),this.node.on(cc.Node.EventType.TOUCH_MOVE,function(){}),this.node.on(cc.Node.EventType.TOUCH_CANCEL,function(){}),this.node.on(cc.Node.EventType.TOUCH_END,function(){GameEvent.emit(GameEventType.GAME_READY)})}}),cc._RF.pop()},{}],"pause-btn":[function(e,t,n){"use strict";cc._RF.push(t,"7f779M5bEdCrYDdqOYeteAI","pause-btn"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.node.on("click",this.handleClick,this)},handleClick:function(){GameEvent.emit(GameEventType.GAME_PAUSE)}}),cc._RF.pop()},{}],"pause-show":[function(e,t,n){"use strict";cc._RF.push(t,"050160nd9dIooXpwfrQL/pO","pause-show"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.maskNode=this.node.getChildByName("Mask"),this.textNode=this.node.getChildByName("Text"),this.maskNode.on(cc.Node.EventType.TOUCH_START,function(){}),this.maskNode.on(cc.Node.EventType.TOUCH_MOVE,function(){}),this.maskNode.on(cc.Node.EventType.TOUCH_CANCEL,function(){}),this.maskNode.on(cc.Node.EventType.TOUCH_END,function(){GameEvent.emit(GameEventType.GAME_RESUME)})},start:function(){this.tween=cc.tween(this.textNode).then(cc.tween().to(.5,{opacity:255}).to(.5,{opacity:0})).repeatForever().start()}}),cc._RF.pop()},{}],"score-show":[function(e,t,n){"use strict";cc._RF.push(t,"6a1941U9gFLXpLh7nWHp0co","score-show"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.label=this.node.getComponent(cc.Label),GameEvent.on(GameEventType.SCORE_UPDATE,this.handleScoreUpdate,this)},handleScoreUpdate:function(e){this.label.string=e}}),cc._RF.pop()},{}],"stroke-draw":[function(e,t,n){"use strict";cc._RF.push(t,"3f9b0spIm1OebJPNdxZDvRd","stroke-draw"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},update:function(){var e=this.node.getComponent(cc.Graphics);e.clear();for(var t=cc.find("Game").getComponent("game-ball-match"),n=0;n<t.waiting.length;n++)if(e.circle(t.waiting[n].x,t.waiting[n].y,12),e.fill(),n!==t.waiting.length-1){var i=t.waiting[n],o=t.waiting[n+1];e.moveTo(i.x,i.y),e.lineTo(o.x,o.y),e.lineWidth=5,e.strokeColor=cc.Color.WHITE,e.stroke()}}}),cc._RF.pop()},{}],"timer-show":[function(e,t,n){"use strict";cc._RF.push(t,"257e4bt8b9OWaOIezFDXbxW","timer-show"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.label=this.node.getComponent(cc.Label),GameEvent.on(GameEventType.TIMER_UPDATE,this.handleTimerUpdate,this)},handleTimerUpdate:function(e){this.label.string=e}}),cc._RF.pop()},{}]},{},["ball-attr","ball-touch","fan-btn","focus-ball-show","focus-counter-show","game-ball-create","game-ball-match","game-event","game-lifecycle","game-physic","game-score","game-timer","game-ui-show","over-show","pause-btn","pause-show","score-show","stroke-draw","timer-show"]);
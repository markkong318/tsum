window.__require=function e(t,n,i){function c(a,s){if(!n[a]){if(!t[a]){var r=a.split("/");if(r=r[r.length-1],!t[r]){var l="function"==typeof __require&&__require;if(!s&&l)return l(r,!0);if(o)return o(r,!0);throw new Error("Cannot find module '"+a+"'")}a=r}var h=n[a]={exports:{}};t[a][0].call(h.exports,function(e){return c(t[a][1][e]||e)},h,h.exports,e,t,n,i)}return n[a].exports}for(var o="function"==typeof __require&&__require,a=0;a<i.length;a++)c(i[a]);return c}({"ball-attr":[function(e,t,n){"use strict";cc._RF.push(t,"c9b93jBUDZGma+eF2K86bf4","ball-attr"),cc.Class({extends:cc.Component,properties:{type:""},onLoad:function(){this.isDead=!1},playDead:function(){this.node.opacity=0}}),cc._RF.pop()},{}],"ball-touch":[function(e,t,n){"use strict";cc._RF.push(t,"61bb2CAov9J75UwU04psHid","ball-touch"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){var e=this;this.node.on(cc.Node.EventType.TOUCH_START,function(){GameEvent.emit(GameEventType.BALL_TOUCH_START,e.node)}),this.node.on(cc.Node.EventType.TOUCH_MOVE,function(e){for(var t=e.getTouches()[0].getLocation(),n=cc.find("Canvas").convertToNodeSpaceAR(t),i=cc.find("Canvas/Ball").children,c=0;c<i.length;c++){var o=i[c],a=o.getComponent(cc.PhysicsCircleCollider).radius*o.scale;n.sub(o.getPosition()).mag()<a&&GameEvent.emit(GameEventType.BALL_TOUCH_MOVE,o)}}),this.node.on(cc.Node.EventType.TOUCH_CANCEL,function(){GameEvent.emit(GameEventType.BALL_TOUCH_END,e.node)}),this.node.on(cc.Node.EventType.TOUCH_END,function(){GameEvent.emit(GameEventType.BALL_TOUCH_END,e.node)}),this.node.on(cc.Node.EventType.MOUSE_ENTER,function(){GameEvent.emit(GameEventType.BALL_MOVE_ENTER,e.node)})}}),cc._RF.pop()},{}],"game-ball-create":[function(e,t,n){"use strict";cc._RF.push(t,"b615550nHtIBrznkrWdzq0r","game-ball-create"),cc.Class({extends:cc.Component,properties:{balls:[cc.Node]},onLoad:function(){for(var e=cc.find("Canvas/Ball"),t=0;t<30;t++){var n=this.balls[Math.floor(Math.random()*this.balls.length)],i=cc.instantiate(n);i.active=!0,i.parent=e}}}),cc._RF.pop()},{}],"game-ball-kill":[function(e,t,n){"use strict";cc._RF.push(t,"59283Pc1spMKKa1QU4W06uJ","game-ball-kill");cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.waiting=[],this.ballType="",this.isTouched=!1,GameEvent.on(GameEventType.BALL_TOUCH_START,this.handleTouchStart,this),GameEvent.on(GameEventType.BALL_TOUCH_END,this.handleTouchEnd,this),GameEvent.on(GameEventType.BALL_TOUCH_MOVE,this.handleMoveEnter,this)},handleTouchStart:function(e){if(!this.waiting.length){var t=e.getComponent("ball-attr");this.ballType=t.type,this.isTouched=!0,this.waiting.push(e)}},handleTouchEnd:function(e){var t=this;if(this.isTouched){for(var n=[],i=0;i<this.waiting.length;i++)n[i]=this.waiting[i];if(this.waiting=[],this.isTouched=!1,n.length>2){for(var c=function(e){var i=n[e].getComponent("ball-attr");t.scheduleOnce(function(){i.playDead()},.2*e+.2)},o=0;o<n.length;o++)c(o);this.scheduleOnce(function(){for(var e=0;e<n.length;e++)n[e].destroy()},.2*(n.length-1)+.2+.2)}}},handleMoveEnter:function(e){if(this.isTouched)if(this.waiting.length>1&&this.waiting[this.waiting.length-2]===e)this.waiting.splice(-1,1);else if(!(this.waiting.indexOf(e)>-1)){var t=e.getComponent("ball-attr");if(!t.isDead&&t.type===this.ballType){var n=this.waiting[this.waiting.length-1],i=e,c=n.getComponent(cc.PhysicsCircleCollider),o=i.getComponent(cc.PhysicsCircleCollider),a=n.getPosition(),s=i.getPosition(),r=a.sub(s).mag()-c.radius*n.scale-o.radius*i.scale;console.log("d: "+r),r>20||(console.log("add node"),this.waiting.push(e))}}}}),cc._RF.pop()},{}],"game-event":[function(e,t,n){"use strict";cc._RF.push(t,"699b4/ytVNOFb56bvm+35RT","game-event"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){window.GameEvent=new cc.EventTarget,window.GameEventType={BALL_TOUCH_START:"BALL_TOUCH_START",BALL_TOUCH_END:"BALL_TOUCH_END",BALL_TOUCH_MOVE:"BALL_TOUCH_MOVE",BALL_MOVE_ENTER:"BALL_MOVE_ENTER",BALL_MOVE_EXIT:"BALL_MOVE_EXIT",GAME_START:"GAME_START",GAME_OVER:"GAME_OVER"},window.NodeEventType={}}}),cc._RF.pop()},{}],"game-physic":[function(e,t,n){"use strict";cc._RF.push(t,"e8ce9782ZNKJKt6ywOPu4bL","game-physic"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){cc.director.getPhysicsManager().enabled=!0,cc.director.getPhysicsManager().gravity=cc.v2(0,-1e3)}}),cc._RF.pop()},{}],m:[function(e,t,n){"use strict";cc._RF.push(t,"96403iRLUpGLLAI9fAXj+aH","m"),cc._RF.pop()},{}],"stroke-draw":[function(e,t,n){"use strict";cc._RF.push(t,"3f9b0spIm1OebJPNdxZDvRd","stroke-draw"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},update:function(){var e=this.node.getComponent(cc.Graphics);e.clear();for(var t=cc.find("Game").getComponent("game-ball-kill"),n=0;n<t.waiting.length;n++)e.circle(t.waiting[n].x,t.waiting[n].y,8);e.fill()}}),cc._RF.pop()},{}]},{},["ball-attr","ball-touch","game-ball-create","game-ball-kill","game-event","game-physic","m","stroke-draw"]);
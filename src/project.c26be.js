window.__require=function e(t,n,i){function c(o,s){if(!n[o]){if(!t[o]){var l=o.split("/");if(l=l[l.length-1],!t[l]){var r="function"==typeof __require&&__require;if(!s&&r)return r(l,!0);if(a)return a(l,!0);throw new Error("Cannot find module '"+o+"'")}o=l}var h=n[o]={exports:{}};t[o][0].call(h.exports,function(e){return c(t[o][1][e]||e)},h,h.exports,e,t,n,i)}return n[o].exports}for(var a="function"==typeof __require&&__require,o=0;o<i.length;o++)c(i[o]);return c}({"ball-attr":[function(e,t,n){"use strict";cc._RF.push(t,"c9b93jBUDZGma+eF2K86bf4","ball-attr"),cc.Class({extends:cc.Component,properties:{type:""},onLoad:function(){this.isDead=!1},playDead:function(){this.node.opacity=0}}),cc._RF.pop()},{}],"ball-select":[function(e,t,n){"use strict";cc._RF.push(t,"935fctfpwZN7avuc7WPn8bo","ball-select");cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.select=!1,GameEvent.on(GameEventType.BALL_SELECT,this.handleSelect,this),GameEvent.on(GameEventType.BALL_DESELECT,this.handleDeselect,this)},handleSelect:function(e){e===this.node.parent?(this.node.scale+=.25,this.select=!0):this.select&&(this.node.scale-=.25,this.select=!1)},handleDeselect:function(){this.select&&(this.node.scale-=.25,this.select=!1)}}),cc._RF.pop()},{}],"ball-touch":[function(e,t,n){"use strict";cc._RF.push(t,"61bb2CAov9J75UwU04psHid","ball-touch"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){var e=this;this.node.on(cc.Node.EventType.TOUCH_START,function(){GameEvent.emit(GameEventType.BALL_TOUCH_START,e.node)}),this.node.on(cc.Node.EventType.TOUCH_MOVE,function(e){for(var t=e.getTouches()[0].getLocation(),n=cc.find("Canvas").convertToNodeSpaceAR(t),i=cc.find("Canvas/Ball").children,c=0;c<i.length;c++){var a=i[c],o=a.getComponent(cc.PhysicsCircleCollider),s=a.getPosition(),l=o.radius*a.scale;n.sub(s).mag()<l&&GameEvent.emit(GameEventType.BALL_TOUCH_MOVE,a)}}),this.node.on(cc.Node.EventType.TOUCH_CANCEL,function(){GameEvent.emit(GameEventType.BALL_TOUCH_END,e.node)}),this.node.on(cc.Node.EventType.TOUCH_END,function(){GameEvent.emit(GameEventType.BALL_TOUCH_END,e.node)})}}),cc._RF.pop()},{}],"fan-btn":[function(e,t,n){"use strict";cc._RF.push(t,"6dba97jnyVHJK4bIzcXM9fE","fan-btn"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.node.on("click",this.handleClick,this)},handleClick:function(){for(var e=cc.find("Canvas/Ball").children,t=0;t<e.length;t++){var n=e[t].getComponent(cc.RigidBody),i=2*Math.random()-1,c=Math.random(),a=cc.v2(i,c).normalize().mul(2e5);n.applyForceToCenter(a)}}}),cc._RF.pop()},{}],"game-ball-create":[function(e,t,n){"use strict";cc._RF.push(t,"b615550nHtIBrznkrWdzq0r","game-ball-create");cc.Class({extends:cc.Component,properties:{balls:[cc.Node]},onLoad:function(){this.handleCreate(40),GameEvent.on(GameEventType.BALL_CREATE,this.handleCreate,this)},lottery:function(){var e=cc.find("Canvas/Ball"),t=this.balls[Math.floor(Math.random()*this.balls.length)],n=cc.instantiate(t);n.active=!0,n.parent=e},handleCreate:function(e){for(var t=0;t<e;t++)this.lottery()}}),cc._RF.pop()},{}],"game-ball-kill":[function(e,t,n){"use strict";cc._RF.push(t,"59283Pc1spMKKa1QU4W06uJ","game-ball-kill");cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.waiting=[],this.ballType="",this.isTouched=!1,GameEvent.on(GameEventType.BALL_TOUCH_START,this.handleTouchStart,this),GameEvent.on(GameEventType.BALL_TOUCH_END,this.handleTouchEnd,this),GameEvent.on(GameEventType.BALL_TOUCH_MOVE,this.handleMoveEnter,this)},handleTouchStart:function(e){if(!this.waiting.length){var t=e.getComponent("ball-attr");this.ballType=t.type,this.isTouched=!0,this.waiting.push(e),GameEvent.emit(GameEventType.BALL_SELECT,e)}},handleTouchEnd:function(e){var t=this;if(this.isTouched){GameEvent.emit(GameEventType.BALL_DESELECT);for(var n=[],i=0;i<this.waiting.length;i++)n[i]=this.waiting[i];if(this.waiting=[],this.isTouched=!1,n.length>2){for(var c=function(e){var i=n[e].getComponent("ball-attr");t.scheduleOnce(function(){i.playDead()},.2*e+.2)},a=0;a<n.length;a++)c(a);this.scheduleOnce(function(){for(var e=0;e<n.length;e++)n[e].destroy();GameEvent.emit(GameEventType.BALL_CREATE,n.length)},.2*(n.length-1)+.2+.2)}}},handleMoveEnter:function(e){if(this.isTouched){if(this.waiting.length>1&&this.waiting[this.waiting.length-2]===e)return this.waiting.splice(-1,1),void GameEvent.emit(GameEventType.BALL_SELECT,e);if(!(this.waiting.indexOf(e)>-1)){var t=e.getComponent("ball-attr");if(!t.isDead&&t.type===this.ballType){var n=this.waiting[this.waiting.length-1],i=e,c=n.getComponent(cc.PhysicsCircleCollider),a=i.getComponent(cc.PhysicsCircleCollider),o=n.getPosition(),s=i.getPosition(),l=o.sub(s).mag()-c.radius*n.scale-a.radius*i.scale;console.log("d: "+l),l>30||(console.log("add node"),this.waiting.push(e),GameEvent.emit(GameEventType.BALL_SELECT,e))}}}}}),cc._RF.pop()},{}],"game-event":[function(e,t,n){"use strict";cc._RF.push(t,"699b4/ytVNOFb56bvm+35RT","game-event"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){window.GameEvent=new cc.EventTarget,window.GameEventType={BALL_TOUCH_START:"BALL_TOUCH_START",BALL_TOUCH_END:"BALL_TOUCH_END",BALL_TOUCH_MOVE:"BALL_TOUCH_MOVE",BALL_SELECT:"BALL_SELECT",BALL_CREATE:"BALL_CREATE",GAME_START:"GAME_START",GAME_OVER:"GAME_OVER"},window.NodeEventType={}}}),cc._RF.pop()},{}],"game-physic":[function(e,t,n){"use strict";cc._RF.push(t,"e8ce9782ZNKJKt6ywOPu4bL","game-physic"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){cc.director.getPhysicsManager().enabled=!0,cc.director.getPhysicsManager().gravity=cc.v2(0,-1e3)}}),cc._RF.pop()},{}],"stroke-draw":[function(e,t,n){"use strict";cc._RF.push(t,"3f9b0spIm1OebJPNdxZDvRd","stroke-draw"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},update:function(){var e=this.node.getComponent(cc.Graphics);e.clear();for(var t=cc.find("Game").getComponent("game-ball-kill"),n=0;n<t.waiting.length;n++)e.circle(t.waiting[n].x,t.waiting[n].y,8);e.fill()}}),cc._RF.pop()},{}]},{},["ball-attr","ball-select","ball-touch","fan-btn","game-ball-create","game-ball-kill","game-event","game-physic","stroke-draw"]);
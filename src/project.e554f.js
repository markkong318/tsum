window.__require=function e(t,n,i){function o(c,a){if(!n[c]){if(!t[c]){var h=c.split("/");if(h=h[h.length-1],!t[h]){var l="function"==typeof __require&&__require;if(!a&&l)return l(h,!0);if(s)return s(h,!0);throw new Error("Cannot find module '"+c+"'")}c=h}var r=n[c]={exports:{}};t[c][0].call(r.exports,function(e){return o(t[c][1][e]||e)},r,r.exports,e,t,n,i)}return n[c].exports}for(var s="function"==typeof __require&&__require,c=0;c<i.length;c++)o(i[c]);return o}({"ball-attr":[function(e,t,n){"use strict";cc._RF.push(t,"c9b93jBUDZGma+eF2K86bf4","ball-attr"),cc.Class({extends:cc.Component,properties:{type:""},onLoad:function(){this.isDead=!1},playDead:function(){this.node.opacity=0}}),cc._RF.pop()},{}],"ball-touch":[function(e,t,n){"use strict";cc._RF.push(t,"61bb2CAov9J75UwU04psHid","ball-touch"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){var e=this;this.node.on(cc.Node.EventType.TOUCH_START,function(){GameEvent.emit(GameEventType.BALL_TOUCH_START,e.node)}),this.node.on(cc.Node.EventType.TOUCH_MOVE,function(e){for(var t=e.getTouches()[0].getLocation(),n=cc.find("Canvas").convertToNodeSpaceAR(t),i=cc.find("Canvas/Ball").children,o=0;o<i.length;o++){var s=i[o],c=s.getComponent(cc.PhysicsCircleCollider),a=s.getPosition(),h=c.radius*s.scale;n.sub(a).mag()<h&&GameEvent.emit(GameEventType.BALL_TOUCH_MOVE,s)}}),this.node.on(cc.Node.EventType.TOUCH_CANCEL,function(){GameEvent.emit(GameEventType.BALL_TOUCH_END,e.node)}),this.node.on(cc.Node.EventType.TOUCH_END,function(){GameEvent.emit(GameEventType.BALL_TOUCH_END,e.node)})}}),cc._RF.pop()},{}],"fan-btn":[function(e,t,n){"use strict";cc._RF.push(t,"6dba97jnyVHJK4bIzcXM9fE","fan-btn"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.isClicked=!1,this.node.on("click",this.handleClick,this)},handleClick:function(){var e=this;if(!0!==this.isClicked){this.isClicked=!0;for(var t=cc.find("Canvas/Ball").children,n=0;n<t.length;n++){var i=t[n].getComponent(cc.RigidBody),o=2*Math.random()-1,s=Math.random(),c=cc.v2(o,s).normalize().mul(2e5);i.applyForceToCenter(c),i.applyTorque(1e5)}this.scheduleOnce(function(){e.isClicked=!1},.5)}}}),cc._RF.pop()},{}],"focus-ball-show":[function(e,t,n){"use strict";cc._RF.push(t,"935fctfpwZN7avuc7WPn8bo","focus-ball-show");cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.initX=this.node.x,this.initY=this.node.y,this.sprite=this.node.getComponent(cc.Sprite),this.targetNode=null,GameEvent.on(GameEventType.BALL_SELECT,this.handleSelect,this),GameEvent.on(GameEventType.BALL_DESELECT,this.handleDeselect,this)},update:function(){this.targetNode&&(this.node.x=this.targetNode.x,this.node.y=this.targetNode.y,this.node.rotation=this.targetNode.rotation)},handleSelect:function(e){var t=e.getComponent(cc.Sprite);this.sprite.spriteFrame=t.spriteFrame,this.targetNode=e,this.node.scale=e.scale+.25},handleDeselect:function(){this.targetNode=null,this.node.x=this.initX,this.node.y=this.initY}}),cc._RF.pop()},{}],"focus-counter-show":[function(e,t,n){"use strict";cc._RF.push(t,"7ca769hQqZO9a0F1eZ/gzd0","focus-counter-show"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.initX=this.node.x,this.initY=this.node.y,this.label=this.node.getComponent(cc.Label),this.targetNode=null,GameEvent.on(GameEventType.BALL_SELECT,this.handleSelect,this),GameEvent.on(GameEventType.BALL_DESELECT,this.handleDeselect,this)},update:function(){this.targetNode&&(this.node.x=this.targetNode.x,this.node.y=this.targetNode.y+80)},handleSelect:function(e,t){this.targetNode=e,this.label.string=t},handleDeselect:function(){this.targetNode=null,this.node.x=this.initX,this.node.y=this.initY}}),cc._RF.pop()},{}],"game-ball-create":[function(e,t,n){"use strict";cc._RF.push(t,"b615550nHtIBrznkrWdzq0r","game-ball-create");cc.Class({extends:cc.Component,properties:{balls:[cc.Node]},onLoad:function(){GameEvent.on(GameEventType.GAME_START,this.handleGameStart,this),GameEvent.on(GameEventType.BALL_KILL,this.handleCreate,this)},lottery:function(){var e=cc.find("Canvas"),t=cc.find("Canvas/Ball"),n=this.balls[Math.floor(Math.random()*this.balls.length)],i=Math.random()*e.width-e.width/2,o=cc.instantiate(n);o.x=i,o.active=!0,o.parent=t},handleGameStart:function(){console.log("handleGameStart"),this.handleCreate(40)},handleCreate:function(e){for(var t=0;t<e;t++)this.lottery()}}),cc._RF.pop()},{}],"game-ball-kill":[function(e,t,n){"use strict";cc._RF.push(t,"59283Pc1spMKKa1QU4W06uJ","game-ball-kill");cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.waiting=[],this.ballType="",this.isTouched=!1,GameEvent.on(GameEventType.BALL_TOUCH_START,this.handleTouchStart,this),GameEvent.on(GameEventType.BALL_TOUCH_END,this.handleTouchEnd,this),GameEvent.on(GameEventType.BALL_TOUCH_MOVE,this.handleMoveEnter,this)},handleTouchStart:function(e){if(!this.waiting.length){var t=e.getComponent("ball-attr");this.ballType=t.type,this.isTouched=!0,this.waiting.push(e),GameEvent.emit(GameEventType.BALL_SELECT,e,this.waiting.length)}},handleTouchEnd:function(e){var t=this;if(this.isTouched){GameEvent.emit(GameEventType.BALL_DESELECT);for(var n=[],i=0;i<this.waiting.length;i++)n[i]=this.waiting[i];if(this.waiting=[],this.isTouched=!1,n.length>2){for(var o=function(e){var i=n[e].getComponent("ball-attr");t.scheduleOnce(function(){i.playDead()},.2*e+.2)},s=0;s<n.length;s++)o(s);this.scheduleOnce(function(){for(var e=0;e<n.length;e++)n[e].destroy();GameEvent.emit(GameEventType.BALL_KILL,n.length)},.2*(n.length-1)+.2+.2)}}},handleMoveEnter:function(e){if(this.isTouched){if(this.waiting.length>1&&this.waiting[this.waiting.length-2]===e)return this.waiting.splice(-1,1),void GameEvent.emit(GameEventType.BALL_SELECT,e,this.waiting.length);if(!(this.waiting.indexOf(e)>-1)){var t=e.getComponent("ball-attr");if(!t.isDead&&t.type===this.ballType){var n=this.waiting[this.waiting.length-1],i=e,o=n.getComponent(cc.PhysicsCircleCollider),s=i.getComponent(cc.PhysicsCircleCollider),c=n.getPosition(),a=i.getPosition(),h=c.sub(a).mag()-o.radius*n.scale-s.radius*i.scale;console.log("d: "+h),h>40||(console.log("add node"),this.waiting.push(e),GameEvent.emit(GameEventType.BALL_SELECT,e,this.waiting.length))}}}}}),cc._RF.pop()},{}],"game-event":[function(e,t,n){"use strict";cc._RF.push(t,"699b4/ytVNOFb56bvm+35RT","game-event"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){window.GameEvent=new cc.EventTarget,window.GameEventType={BALL_TOUCH_START:"BALL_TOUCH_START",BALL_TOUCH_END:"BALL_TOUCH_END",BALL_TOUCH_MOVE:"BALL_TOUCH_MOVE",BALL_SELECT:"BALL_SELECT",BALL_DESELECT:"BALL_DESELECT",BALL_KILL:"BALL_KILL",GAME_READY:"GAME_READY",GAME_START:"GAME_START",GAME_OVER:"GAME_OVER"},window.NodeEventType={}},start:function(){GameEvent.emit(GameEventType.GAME_START)}}),cc._RF.pop()},{}],"game-physic":[function(e,t,n){"use strict";cc._RF.push(t,"e8ce9782ZNKJKt6ywOPu4bL","game-physic"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){cc.director.getPhysicsManager().enabled=!0,cc.director.getPhysicsManager().gravity=cc.v2(0,-1e3)}}),cc._RF.pop()},{}],"game-ui-show":[function(e,t,n){"use strict";cc._RF.push(t,"049a5CcmEdDTYKkqMvr3yZ3","game-ui-show");cc.Class({extends:cc.Component,properties:{},onLoad:function(){var e=cc.find("Canvas/Top"),t=cc.find("Canvas/Bottom");e.y=100+e.height/2,t.y=-100-t.height/2}}),cc._RF.pop()},{}],"score-show":[function(e,t,n){"use strict";cc._RF.push(t,"6a1941U9gFLXpLh7nWHp0co","score-show");cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.score=0,this.label=this.node.getComponent(cc.Label),GameEvent.on(GameEventType.GAME_READY,this.handleGameReady,this),GameEvent.on(GameEventType.BALL_KILL,this.handleBallKill,this)},handleGameReady:function(){this.score=0,this.label.string=this.score},handleBallKill:function(e){this.score+=10*e,this.label.string=this.score}}),cc._RF.pop()},{}],"stroke-draw":[function(e,t,n){"use strict";cc._RF.push(t,"3f9b0spIm1OebJPNdxZDvRd","stroke-draw"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},update:function(){var e=this.node.getComponent(cc.Graphics);e.clear();for(var t=cc.find("Game").getComponent("game-ball-kill"),n=0;n<t.waiting.length;n++)if(e.circle(t.waiting[n].x,t.waiting[n].y,12),e.fill(),n!==t.waiting.length-1){var i=t.waiting[n],o=t.waiting[n+1];console.log(n),console.log(i),console.log(o),e.moveTo(i.x,i.y),e.lineTo(o.x,o.y),e.lineWidth=5,e.strokeColor=cc.Color.WHITE,e.stroke()}}}),cc._RF.pop()},{}],"timer-show":[function(e,t,n){"use strict";cc._RF.push(t,"257e4bt8b9OWaOIezFDXbxW","timer-show");cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.second=60,this.label=this.node.getComponent(cc.Label),GameEvent.on(GameEventType.GAME_START,this.handleGameStart,this)},handleGameStart:function(){this.second=60,this.schedule(this.handleCountDown,1,this)},handleCountDown:function(){this.second-=1,this.label.string=this.second,0===this.second&&(this.unschedule(this.handleCountDown,this),GameEvent.emit(GameEventType.GAME_OVER))}}),cc._RF.pop()},{}]},{},["ball-attr","ball-touch","fan-btn","focus-ball-show","focus-counter-show","game-ball-create","game-ball-kill","game-event","game-physic","game-ui-show","score-show","stroke-draw","timer-show"]);